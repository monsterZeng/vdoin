(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{591:function(s,a,e){"use strict";e.r(a);var t=e(15),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("使用并发的第一种方法，是将应用程序分为多个独立的进程，它们在同一时刻运行，就像同时进行网页浏览和文字处理一样。如图1.3所示，独立的进程可以通过进程间常规的通信渠道传递讯息(信号、套接字、文件、管道等等)。不过，这种进程之间的通信通常不是设置复杂，就是速度慢，这是因为操作系统会在进程间提供了一定的保护措施，以避免一个进程去修改另一个进程的数据。还一个缺点是，运行多个进程所需的固定开销：需要时间启动进程，操作系统需要内部资源来管理进程，等等。")]),s._v(" "),e("p",[e("img",{attrs:{src:"C:%5CUsers%5Cdell%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210626150111653.png",alt:"image-20210626150111653"}})]),s._v(" "),e("center",[s._v("图1.3: 一对并发运行的进程之间的通信")]),s._v(" "),e("p",[s._v("当然，以上的机制也不是一无是处：操作系统在线程间提供的附加保护操作和更高级别的通信机制，意味着可以更容易编写安全("),e("em",[s._v("safe")]),s._v(")的并发代码。使用独立的进程，实现并发还有一个额外的优势———可以使用远程连接(可能需要联网)的方式，在不同的机器上运行独立的进程。虽然，这增加了通信成本，但在设计精良的系统上，这可能是一个提高并行可用行和性能的低成本方式。")]),s._v(" "),e("p",[s._v("并发的另一个途径，在单个进程中运行多个线程。线程很像轻量级的进程：每个线程相互独立运行，且线程可以在不同的指令序列中运行。但是，进程中的所有线程都共享地址空间，并且所有线程访问到大部分数据———全局变量仍然是全局的，指针、对象的引用或数据可以在线程之间传递。虽然，进程之间通常共享内存，但这种共享通常也是难以建立，且难以管理。因为，同一数据的内存地址在不同的进程中是不相同。")]),s._v(" "),e("p",[e("img",{attrs:{src:"C:%5CUsers%5Cdell%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210626150343798.png",alt:"image-20210626150343798"}})]),s._v(" "),e("center",[s._v("图4: 同一进程中的一对并发运行的线程之间的通信")]),s._v(" "),e("p",[s._v("地址空间共享，以及缺少线程间数据的保护，使得操作系统的记录工作量减小，所以使用多线程相关的开销远远小于使用多个进程。")]),s._v(" "),e("p",[s._v("不过，共享内存的灵活性是有代价的：如果数据要被多个线程访问，那么程序员必须确保每个线程所访问到的数据是一致的。问题并非无解，只要在编写代码时适当地注意即可，这同样也意味着需要对线程通信做大量的工作。")]),s._v(" "),e("p",[s._v("多个单线程/进程间的通信(包含启动)要比单一进程中的多线程间的通信(包括启动)的开销大，若不考虑共享内存可能会带来的问题，多线程将会成为主流语言(包括C++)更青睐的并发途径。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#include<iostream>\n#include<thread>\nusing namespace std;\nvoid do_something(){\n    cout<<"Hello World!!!"<<endl;\n}\nint main(){\n    thread t(do_something);\n    t.join();\n    return 0;\n\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("div",{staticClass:"language-cpp line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[s._v("g"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" example"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpp "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("std"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o example "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Wl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("no"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("as"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("needed  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("lpthread\n    \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])],1)}),[],!1,null,null,null);a.default=n.exports}}]);