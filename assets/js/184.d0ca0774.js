(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{491:function(s,t,a){"use strict";a.r(t);var e=a(15),i=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"一、原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、原理"}},[s._v("#")]),s._v(" 一、原理")]),s._v(" "),a("ul",[a("li",[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("msub",[a("mi",[s._v("x")]),a("mi",[s._v("v")])],1),a("mo",[s._v("∈")]),a("msup",[a("mrow",[a("mi",{attrs:{mathvariant:"double-struck"}},[s._v("R")])],1),a("mrow",[a("msub",[a("mi",[s._v("d")]),a("mn",[s._v("1")])],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("x_v\\in\\mathbb{R}^{d_1}")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.849108em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"0.999108em","vertical-align":"-0.15em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("x")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mrel"},[s._v("∈")]),a("span",{},[a("span",{staticClass:"mord textstyle uncramped"},[a("span",{staticClass:"mord mathbb"},[s._v("R")])]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"-0.363em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("d")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.15em","margin-right":"0.07142857142857144em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle scriptscriptstyle cramped"},[a("span",{staticClass:"mord mathrm"},[s._v("1")])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])])]),s._v("：节点v的特征")]),s._v(" "),a("li",[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("msub",[a("mi",[s._v("w")]),a("mi",[s._v("e")])],1),a("mo",[s._v("∈")]),a("msup",[a("mrow",[a("mi",{attrs:{mathvariant:"double-struck"}},[s._v("R")])],1),a("mrow",[a("msub",[a("mi",[s._v("d")]),a("mn",[s._v("2")])],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("w_e\\in\\mathbb{R}^{d_2}")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.849108em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"0.999108em","vertical-align":"-0.15em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"-0.02691em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("e")])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mrel"},[s._v("∈")]),a("span",{},[a("span",{staticClass:"mord textstyle uncramped"},[a("span",{staticClass:"mord mathbb"},[s._v("R")])]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"-0.363em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("d")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.15em","margin-right":"0.07142857142857144em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle scriptscriptstyle cramped"},[a("span",{staticClass:"mord mathrm"},[s._v("2")])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])])]),s._v("：边"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("u")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("v")]),a("mo",[s._v(")")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("(u,v)")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.75em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),s._v("的特征")])]),s._v(" "),a("p",[s._v("DGL实现"),a("strong",[s._v("Message Passing")]),s._v("框架有两个步骤")]),s._v(" "),a("ol",[a("li",[s._v("在每条边上生成消息")]),s._v(" "),a("li",[s._v("更新目标节点的特征。")])]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mtable",[a("mtr",[a("mtd",[a("mrow",[a("mtext",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("E")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("d")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("g")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("e")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("-")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("w")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("i")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("s")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("e")])],1),a("mo",[s._v(":")]),a("msubsup",[a("mi",[s._v("m")]),a("mi",[s._v("e")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("t")]),a("mo",[s._v("+")]),a("mn",[s._v("1")]),a("mo",[s._v(")")])],1)],1)],1)],1),a("mtd",[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("msup",[a("mi",[s._v("ϕ")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("t")]),a("mo",[s._v(")")])],1)],1),a("mo",[s._v("(")]),a("msubsup",[a("mi",[s._v("x")]),a("mi",[s._v("v")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("t")]),a("mo",[s._v(")")])],1)],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("msubsup",[a("mi",[s._v("x")]),a("mi",[s._v("u")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("t")]),a("mo",[s._v(")")])],1)],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("msubsup",[a("mi",[s._v("w")]),a("mi",[s._v("e")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("t")]),a("mo",[s._v(")")])],1)],1),a("mo",[s._v(")")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mo",[s._v("(")]),a("mi",[s._v("u")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("v")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("e")]),a("mo",[s._v(")")]),a("mo",[s._v("∈")]),a("mrow",[a("mi",{attrs:{mathvariant:"script"}},[s._v("E")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mrow",[a("mtext",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("N")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("o")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("d")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("e")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("-")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("w")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("i")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("s")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("e")])],1),a("mo",[s._v(":")]),a("msubsup",[a("mi",[s._v("x")]),a("mi",[s._v("v")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("t")]),a("mo",[s._v("+")]),a("mn",[s._v("1")]),a("mo",[s._v(")")])],1)],1)],1)],1),a("mtd",[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("msup",[a("mi",[s._v("φ")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("t")]),a("mo",[s._v(")")])],1)],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",[s._v("x")]),a("mi",[s._v("v")]),a("mrow",[a("mi",[s._v("t")])],1)],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("ρ")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("{")]),a("msubsup",[a("mi",[s._v("m")]),a("mi",[s._v("e")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("t")]),a("mo",[s._v("+")]),a("mn",[s._v("1")]),a("mo",[s._v(")")])],1)],1),a("mo",[s._v(":")]),a("mo",[s._v("(")]),a("mi",[s._v("u")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("v")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("e")]),a("mo",[s._v(")")]),a("mo",[s._v("∈")]),a("mrow",[a("mi",{attrs:{mathvariant:"script"}},[s._v("E")])],1),a("mo",{attrs:{fence:"true"}},[s._v("}")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{aligned}\n\\text{Edge-wise}:m_e^{(t+1)}&=\\phi^{(t)}(x_v^{(t)}, x_u^{(t)}, w_e^{(t)}),(u,v,e)\\in\\mathcal{E} \\\\\n\\text{Node-wise}:x_v^{(t+1)}&=\\varphi^{(t)}\\left(x_v^{t},\\rho\\left(\\left\\{m_e^{(t+1)}:(u,v,e)\\in\\mathcal{E} \\right\\}\\right)\\right)\n\\end{aligned}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"1.79901em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"3.09802em","vertical-align":"-1.29901em"}}),a("span",{staticClass:"base displaystyle textstyle uncramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"-0.86101em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"mord displaystyle textstyle uncramped"},[a("span",{staticClass:"text mord displaystyle textstyle uncramped"},[a("span",{staticClass:"mord mathrm"},[s._v("E")]),a("span",{staticClass:"mord mathrm"},[s._v("d")]),a("span",{staticClass:"mord mathrm",staticStyle:{"margin-right":"0.01389em"}},[s._v("g")]),a("span",{staticClass:"mord mathrm"},[s._v("e")]),a("span",{staticClass:"mord mathrm"},[s._v("-")]),a("span",{staticClass:"mord mathrm",staticStyle:{"margin-right":"0.01389em"}},[s._v("w")]),a("span",{staticClass:"mord mathrm"},[s._v("i")]),a("span",{staticClass:"mord mathrm"},[s._v("s")]),a("span",{staticClass:"mord mathrm"},[s._v("e")])]),a("span",{staticClass:"mrel"},[s._v(":")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("m")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("e")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("t")]),a("span",{staticClass:"mbin"},[s._v("+")]),a("span",{staticClass:"mord mathrm"},[s._v("1")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])]),a("span",{staticStyle:{top:"0.64899em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"mord displaystyle textstyle uncramped"},[a("span",{staticClass:"text mord displaystyle textstyle uncramped"},[a("span",{staticClass:"mord mathrm"},[s._v("N")]),a("span",{staticClass:"mord mathrm"},[s._v("o")]),a("span",{staticClass:"mord mathrm"},[s._v("d")]),a("span",{staticClass:"mord mathrm"},[s._v("e")]),a("span",{staticClass:"mord mathrm"},[s._v("-")]),a("span",{staticClass:"mord mathrm",staticStyle:{"margin-right":"0.01389em"}},[s._v("w")]),a("span",{staticClass:"mord mathrm"},[s._v("i")]),a("span",{staticClass:"mord mathrm"},[s._v("s")]),a("span",{staticClass:"mord mathrm"},[s._v("e")])]),a("span",{staticClass:"mrel"},[s._v(":")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("x")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("t")]),a("span",{staticClass:"mbin"},[s._v("+")]),a("span",{staticClass:"mord mathrm"},[s._v("1")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"-0.86101em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),a("span",{staticClass:"mord displaystyle textstyle uncramped"},[a("span",{staticClass:"mord displaystyle textstyle uncramped"}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("ϕ")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"-0.413em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("t")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("x")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("t")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("x")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("t")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"-0.02691em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("e")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("t")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mord mathit"},[s._v("e")]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mrel"},[s._v("∈")]),a("span",{staticClass:"mord displaystyle textstyle uncramped"},[a("span",{staticClass:"mord mathcal",staticStyle:{"margin-right":"0.08944em"}},[s._v("E")])])])]),a("span",{staticStyle:{top:"0.64899em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),a("span",{staticClass:"mord displaystyle textstyle uncramped"},[a("span",{staticClass:"mord displaystyle textstyle uncramped"}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("φ")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"-0.413em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("t")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"minner displaystyle textstyle uncramped"},[a("span",{staticClass:"style-wrap reset-textstyle textstyle uncramped",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size2"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("x")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mord mathit"},[s._v("t")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mord mathit"},[s._v("ρ")]),a("span",{staticClass:"minner displaystyle textstyle uncramped"},[a("span",{staticClass:"style-wrap reset-textstyle textstyle uncramped",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size2"},[s._v("(")])]),a("span",{staticClass:"minner displaystyle textstyle uncramped"},[a("span",{staticClass:"style-wrap reset-textstyle textstyle uncramped",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size2"},[s._v("{")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("m")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("e")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("t")]),a("span",{staticClass:"mbin"},[s._v("+")]),a("span",{staticClass:"mord mathrm"},[s._v("1")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mrel"},[s._v(":")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mord mathit"},[s._v("e")]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mrel"},[s._v("∈")]),a("span",{staticClass:"mord displaystyle textstyle uncramped"},[a("span",{staticClass:"mord mathcal",staticStyle:{"margin-right":"0.08944em"}},[s._v("E")])]),a("span",{staticClass:"style-wrap reset-textstyle textstyle uncramped",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size2"},[s._v("}")])])]),a("span",{staticClass:"style-wrap reset-textstyle textstyle uncramped",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size2"},[s._v(")")])])]),a("span",{staticClass:"style-wrap reset-textstyle textstyle uncramped",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size2"},[s._v(")")])])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),s._v("​")])])])])])])])])])]),s._v(" "),a("ul",[a("li",[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mi",[s._v("ϕ")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\phi")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.69444em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"0.8888799999999999em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord mathit"},[s._v("ϕ")])])])]),s._v("​：消息产生函数，DGL称之为Message function")]),s._v(" "),a("li",[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mi",[s._v("ρ")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\rho")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.43056em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"0.625em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord mathit"},[s._v("ρ")])])])]),s._v("​：消息聚合函数，DGL称之为Reduce function")]),s._v(" "),a("li",[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mi",[s._v("φ")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\varphi")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.43056em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"0.625em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord mathit"},[s._v("φ")])])])]),s._v("​：节点更新函数，DGLl")])]),s._v(" "),a("p",[s._v("在DGL中，消息产生函数"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mi",[s._v("ϕ")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\phi")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.69444em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"0.8888799999999999em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord mathit"},[s._v("ϕ")])])])]),s._v("​​以batch的方式将"),a("code",[s._v("edge")]),s._v("作为参数，这个参数有三个成员。最后将结果保存到边上。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("src")]),s._v("：访问源节点")]),s._v(" "),a("li",[a("code",[s._v("dst")]),s._v("：访问目标节点")]),s._v(" "),a("li",[a("code",[s._v("data")]),s._v("：边的特征。")])]),s._v(" "),a("p",[s._v("消息聚合函数"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mi",[s._v("ρ")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\rho")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.43056em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"0.625em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord mathit"},[s._v("ρ")])])])]),s._v("​​​​​将节点作为参数，它有一个成员"),a("code",[s._v("mailbox")]),s._v("去访问每个邻居节点产生的消息。最后保存在目标节点上。")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("g"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("update_all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是一个高阶api，传入，Message_func, Reduce_fun, Apply_node_func")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Message_func，将edge作为参数，在edge上产生消息结果。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Reduce_func，将node作为参数，在node上产生结果。")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"二、经典模型的实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、经典模型的实现"}},[s._v("#")]),s._v(" 二、经典模型的实现")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://arxiv.org/abs/1609.02907",target:"_blank",rel:"noopener noreferrer"}},[s._v("Semi-Supervised Classification with Graph Convolutional Networks"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("原论文的节点更新公式为：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mi",[s._v("Z")]),a("mo",[s._v("=")]),a("msup",[a("mover",{attrs:{accent:"true"}},[a("mrow",[a("mi",[s._v("D")])],1),a("mo",[s._v("^")])],1),a("mrow",[a("mo",[s._v("−")]),a("mfrac",[a("mrow",[a("mn",[s._v("1")])],1),a("mrow",[a("mn",[s._v("2")])],1)],1)],1)],1),a("mover",{attrs:{accent:"true"}},[a("mrow",[a("mi",[s._v("A")])],1),a("mo",[s._v("^")])],1),a("msup",[a("mover",{attrs:{accent:"true"}},[a("mrow",[a("mi",[s._v("D")])],1),a("mo",[s._v("^")])],1),a("mrow",[a("mo",[s._v("−")]),a("mfrac",[a("mrow",[a("mn",[s._v("1")])],1),a("mrow",[a("mn",[s._v("2")])],1)],1)],1)],1),a("mi",[s._v("X")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("Θ")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("Z=\\hat{D}^{-\\frac{1}{2}}\\hat{A}\\hat{D}^{-\\frac{1}{2}}X\\Theta\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"1.01102em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"1.01102em","vertical-align":"0em"}}),a("span",{staticClass:"base displaystyle textstyle uncramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.07153em"}},[s._v("Z")]),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"mord displaystyle textstyle cramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[s._v("D")])])]),a("span",{staticStyle:{top:"-0.25233em","margin-left":"0.11112em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"accent-body"},[a("span",[s._v("^")])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"-0.413em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mord"},[s._v("−")]),a("span",{staticClass:"mord reset-scriptstyle scriptstyle uncramped"},[a("span",{staticClass:"sizing reset-size5 size5 reset-scriptstyle textstyle uncramped nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.345em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle scriptscriptstyle cramped"},[a("span",{staticClass:"mord scriptscriptstyle cramped"},[a("span",{staticClass:"mord mathrm"},[s._v("2")])])])]),a("span",{staticStyle:{top:"-0.22142857142857142em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle textstyle uncramped frac-line"})]),a("span",{staticStyle:{top:"-0.394em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle scriptscriptstyle uncramped"},[a("span",{staticClass:"mord scriptscriptstyle uncramped"},[a("span",{staticClass:"mord mathrm"},[s._v("1")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"sizing reset-size5 size5 reset-scriptstyle textstyle uncramped nulldelimiter"})])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"mord displaystyle textstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("A")])])]),a("span",{staticStyle:{top:"-0.25233em","margin-left":"0.27778em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"accent-body"},[a("span",[s._v("^")])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"mord displaystyle textstyle cramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[s._v("D")])])]),a("span",{staticStyle:{top:"-0.25233em","margin-left":"0.11112em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"accent-body"},[a("span",[s._v("^")])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"-0.413em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mord"},[s._v("−")]),a("span",{staticClass:"mord reset-scriptstyle scriptstyle uncramped"},[a("span",{staticClass:"sizing reset-size5 size5 reset-scriptstyle textstyle uncramped nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.345em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle scriptscriptstyle cramped"},[a("span",{staticClass:"mord scriptscriptstyle cramped"},[a("span",{staticClass:"mord mathrm"},[s._v("2")])])])]),a("span",{staticStyle:{top:"-0.22142857142857142em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle textstyle uncramped frac-line"})]),a("span",{staticStyle:{top:"-0.394em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle scriptscriptstyle uncramped"},[a("span",{staticClass:"mord scriptscriptstyle uncramped"},[a("span",{staticClass:"mord mathrm"},[s._v("1")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"sizing reset-size5 size5 reset-scriptstyle textstyle uncramped nulldelimiter"})])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.07847em"}},[s._v("X")]),a("span",{staticClass:"mord mathrm"},[s._v("Θ")])])])])])]),s._v(" "),a("p",[s._v("转成Message Passing为:")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("msubsup",[a("mi",[s._v("h")]),a("mi",[s._v("v")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("t")]),a("mo",[s._v("+")]),a("mn",[s._v("1")]),a("mo",[s._v(")")])],1)],1),a("mo",[s._v("=")]),a("msub",[a("mo",[s._v("∑")]),a("mrow",[a("mi",[s._v("u")]),a("mo",[s._v("∈")]),a("mrow",[a("mi",{attrs:{mathvariant:"script"}},[s._v("N")])],1),a("mo",[s._v("(")]),a("mi",[s._v("v")]),a("mo",[s._v(")")])],1)],1),a("mfrac",[a("mrow",[a("mn",[s._v("1")])],1),a("mrow",[a("msqrt",[a("mrow",[a("mtext",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("D")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("e")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("g")])],1),a("mo",[s._v("(")]),a("mi",[s._v("u")]),a("mo",[s._v(")")])],1)],1),a("msqrt",[a("mrow",[a("mtext",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("D")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("e")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("g")])],1),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("v")]),a("mo",[s._v(")")])],1)],1)],1)],1)],1),a("msubsup",[a("mi",[s._v("h")]),a("mi",[s._v("u")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("t")]),a("mo",[s._v(")")])],1)],1),a("mi",{attrs:{mathvariant:"normal"}},[s._v("Θ")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("h_v^{(t+1)}=\\sum_{u\\in\\mathcal{N}(v)}\\frac{1}{\\sqrt{\\text{Deg}(u)}\\sqrt{\\text{Deg}{(v)}}}h_u^{(t)}\\Theta\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"1.32144em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"2.8374449999999998em","vertical-align":"-1.516005em"}}),a("span",{staticClass:"base displaystyle textstyle uncramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("h")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("t")]),a("span",{staticClass:"mbin"},[s._v("+")]),a("span",{staticClass:"mord mathrm"},[s._v("1")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mop op-limits"},[a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"1.241005em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mrel"},[s._v("∈")]),a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord mathcal",staticStyle:{"margin-right":"0.14736em"}},[s._v("N")])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticStyle:{top:"-0.000005000000000032756em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",[a("span",{staticClass:"op-symbol large-op mop"},[s._v("∑")])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mord reset-textstyle displaystyle textstyle uncramped"},[a("span",{staticClass:"sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.825005em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle textstyle cramped"},[a("span",{staticClass:"mord textstyle cramped"},[a("span",{staticClass:"sqrt mord"},[a("span",{staticClass:"sqrt-sign",staticStyle:{top:"-0.04500500000000007em"}},[a("span",{staticClass:"style-wrap reset-textstyle textstyle uncramped"},[a("span",{staticClass:"delimsizing size1"},[s._v("√")])])]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),a("span",{staticClass:"mord textstyle cramped"},[a("span",{staticClass:"text mord textstyle cramped"},[a("span",{staticClass:"mord mathrm"},[s._v("D")]),a("span",{staticClass:"mord mathrm"},[s._v("e")]),a("span",{staticClass:"mord mathrm",staticStyle:{"margin-right":"0.01389em"}},[s._v("g")])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mclose"},[s._v(")")])])]),a("span",{staticStyle:{top:"-0.855005em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle textstyle uncramped sqrt-line"})]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"sqrt mord"},[a("span",{staticClass:"sqrt-sign",staticStyle:{top:"-0.04500500000000007em"}},[a("span",{staticClass:"style-wrap reset-textstyle textstyle uncramped"},[a("span",{staticClass:"delimsizing size1"},[s._v("√")])])]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),a("span",{staticClass:"mord textstyle cramped"},[a("span",{staticClass:"text mord textstyle cramped"},[a("span",{staticClass:"mord mathrm"},[s._v("D")]),a("span",{staticClass:"mord mathrm"},[s._v("e")]),a("span",{staticClass:"mord mathrm",staticStyle:{"margin-right":"0.01389em"}},[s._v("g")])]),a("span",{staticClass:"mord textstyle cramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticStyle:{top:"-0.855005em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle textstyle uncramped sqrt-line"})]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),s._v("​")])])])])])]),a("span",{staticStyle:{top:"-0.22999999999999998em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle textstyle uncramped frac-line"})]),a("span",{staticStyle:{top:"-0.677em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle textstyle uncramped"},[a("span",{staticClass:"mord textstyle uncramped"},[a("span",{staticClass:"mord mathrm"},[s._v("1")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"1em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"})]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("h")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit"},[s._v("t")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mord mathrm"},[s._v("Θ")])])])])])]),s._v(" "),a("ul",[a("li",[s._v("Deg(u)是源节点的度，Deg(v)是目标节点的度，这里的权重为正则系数")])]),s._v(" "),a("p",[s._v("转变过程，可查看这篇文章。")]),s._v(" "),a("p",[s._v("此处的节点更新公式为，每个节点乘以正则系数，最后相加。那么对于Message Passing来说")]),s._v(" "),a("ul",[a("li",[s._v("Message func就是在源节点的特征上乘以正则系数")]),s._v(" "),a("li",[s._v("Reduce func就是将源节点上获得的消息乘以本身的正则系数，最后求和")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Semi-Supervised Classification with Graph Convolutional Networks  https://arxiv.org/abs/1609.02907")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dgl的图是由边的集合[src, dst]构成的，而reduce_func中节点是dst的集合")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对于无向图来说，src与dst是相同的。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("message_func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("edge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" edge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'h'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" edge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'norm'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'m'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reduce_func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    feat "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" torch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mailbox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'m'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'norm'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'h'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("feat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\ng"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("update_all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message_func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reduce_func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("在很多时候，我们Message func和Reduce func不仅仅需要传入edge/node参数，还需要传入其他参数。那么，可以使用"),a("code",[s._v("partial")]),s._v("绑定其余参数，再传递到"),a("code",[s._v("g.update_all()")]),s._v("中。例如Deeper GCN中GEN和softmax arrg。")]),s._v(" "),a("p",[s._v("这里，我们不具体讨论Deeper GCN的原理，仅仅讨论如何通过绑定消息产生函数和聚合函数的其余参数来实现Message Passing。")]),s._v(" "),a("p",[s._v("消息产生函数")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("msubsup",[a("mi",[s._v("m")]),a("mrow",[a("mi",[s._v("u")]),a("mi",[s._v("v")])],1),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("l")]),a("mo",[s._v(")")])],1)],1),a("mo",[s._v("=")]),a("msup",[a("mi",[s._v("ρ")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("l")]),a("mo",[s._v(")")])],1)],1),a("mo",[s._v("(")]),a("msubsup",[a("mi",[s._v("h")]),a("mi",[s._v("v")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("l")]),a("mo",[s._v(")")])],1)],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("msubsup",[a("mi",[s._v("h")]),a("mi",[s._v("u")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("l")]),a("mo",[s._v(")")]),a("mo",[s._v(")")])],1)],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("msubsup",[a("mi",[s._v("h")]),a("mrow",[a("msub",[a("mi",[s._v("e")]),a("mrow",[a("mi",[s._v("u")]),a("mi",[s._v("v")])],1)],1)],1),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("l")]),a("mo",[s._v(")")])],1)],1),a("mo",[s._v(")")]),a("mo",[s._v("=")]),a("mtext",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("R")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("E")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("L")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("U")])],1),a("mo",[s._v("(")]),a("msubsup",[a("mi",[s._v("h")]),a("mi",[s._v("u")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("l")]),a("mo",[s._v(")")])],1)],1),a("mo",[s._v("+")]),a("mrow",[a("mn",{attrs:{mathvariant:"normal"}},[s._v("1")])],1),a("mo",[s._v("(")]),a("msubsup",[a("mi",[s._v("h")]),a("mrow",[a("msub",[a("mi",[s._v("e")]),a("mrow",[a("mi",[s._v("u")]),a("mi",[s._v("v")])],1)],1)],1),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("l")]),a("mo",[s._v(")")])],1)],1),a("mo",[s._v(")")]),a("mo",[s._v("⋅")]),a("msubsup",[a("mi",[s._v("h")]),a("mrow",[a("msub",[a("mi",[s._v("e")]),a("mrow",[a("mi",[s._v("u")]),a("mi",[s._v("v")])],1)],1)],1),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("l")]),a("mo",[s._v(")")])],1)],1),a("mo",[s._v(")")]),a("mo",[s._v("+")]),a("mi",[s._v("ϵ")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("u")]),a("mo",[s._v("∈")]),a("mrow",[a("mi",{attrs:{mathvariant:"script"}},[s._v("N")])],1),a("mo",[s._v("(")]),a("mi",[s._v("v")]),a("mo",[s._v(")")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("m_{uv}^{(l)}=\\rho^{(l)}(h_v^{(l)}, h_u^{(l))},h_{e_{uv}}^{(l)})=\n\\text{RELU}(h_u^{(l)}+\\mathbb{1}(h_{e_{uv}}^{(l)})\\cdot h_{e_{uv}}^{(l)})+\\epsilon,u\\in\\mathcal{N}(v)\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.938em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"1.29em","vertical-align":"-0.352em"}}),a("span",{staticClass:"base displaystyle textstyle uncramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("m")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("ρ")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"-0.413em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("h")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("h")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("h")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("e")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.15em","margin-right":"0.07142857142857144em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle scriptscriptstyle cramped"},[a("span",{staticClass:"mord scriptscriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])])]),a("span",{staticStyle:{top:"-0.41299999999999987em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"text mord displaystyle textstyle uncramped"},[a("span",{staticClass:"mord mathrm"},[s._v("R")]),a("span",{staticClass:"mord mathrm"},[s._v("E")]),a("span",{staticClass:"mord mathrm"},[s._v("L")]),a("span",{staticClass:"mord mathrm"},[s._v("U")])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("h")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mbin"},[s._v("+")]),a("span",{staticClass:"mord displaystyle textstyle uncramped"},[a("span",{staticClass:"mord mathrm"},[s._v("1")])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("h")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("e")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.15em","margin-right":"0.07142857142857144em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle scriptscriptstyle cramped"},[a("span",{staticClass:"mord scriptscriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])])]),a("span",{staticStyle:{top:"-0.41299999999999987em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mbin"},[s._v("⋅")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("h")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("e")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.15em","margin-right":"0.07142857142857144em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle scriptscriptstyle cramped"},[a("span",{staticClass:"mord scriptscriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])])]),a("span",{staticStyle:{top:"-0.41299999999999987em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mbin"},[s._v("+")]),a("span",{staticClass:"mord mathit"},[s._v("ϵ")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mrel"},[s._v("∈")]),a("span",{staticClass:"mord displaystyle textstyle uncramped"},[a("span",{staticClass:"mord mathcal",staticStyle:{"margin-right":"0.14736em"}},[s._v("N")])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mclose"},[s._v(")")])])])])])]),s._v(" "),a("p",[s._v("这里的"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mrow",[a("mn",{attrs:{mathvariant:"normal"}},[s._v("1")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\mathbb{1}")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.64444em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord textstyle uncramped"},[a("span",{staticClass:"mord mathrm"},[s._v("1")])])])])]),s._v("​是指示函数，是否存在边的特征"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("msub",[a("mi",[s._v("h")]),a("mrow",[a("msub",[a("mi",[s._v("e")]),a("mrow",[a("mi",[s._v("u")]),a("mi",[s._v("v")])],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("h_{e_{uv}}")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.69444em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"0.94944em","vertical-align":"-0.255em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("h")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.15000000000000002em","margin-right":"0.05em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("e")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.15em","margin-right":"0.07142857142857144em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-scriptstyle scriptscriptstyle cramped"},[a("span",{staticClass:"mord scriptscriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])])]),s._v("。为简单期间，这里不使用边的特征，那么")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" torch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("nn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("functional "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" F\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("message_func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("edge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" epsilon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    m "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" F"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("relu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("edge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'h'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" epsilon\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'m'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("Softmax Aggr:")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mtext",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("S")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("o")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("f")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("t")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("M")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("a")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("x")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("A")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("g")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("g")])],1),a("mo",[s._v("=")]),a("msub",[a("mo",[s._v("∑")]),a("mrow",[a("mi",[s._v("u")]),a("mo",[s._v("∈")]),a("mrow",[a("mi",{attrs:{mathvariant:"script"}},[s._v("N")])],1),a("mo",[s._v("(")]),a("mi",[s._v("v")]),a("mo",[s._v(")")])],1)],1),a("mfrac",[a("mrow",[a("mi",[s._v("exp")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("β")]),a("msub",[a("mi",[s._v("m")]),a("mrow",[a("mi",[s._v("v")]),a("mi",[s._v("u")])],1)],1),a("mo",[s._v(")")])],1)],1),a("mrow",[a("msub",[a("mo",[s._v("∑")]),a("mrow",[a("mi",[s._v("i")]),a("mo",[s._v("∈")]),a("mrow",[a("mi",{attrs:{mathvariant:"script"}},[s._v("N")])],1),a("mo",[s._v("(")]),a("mi",[s._v("v")]),a("mo",[s._v(")")])],1)],1),a("mi",[s._v("exp")]),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("β")]),a("msub",[a("mi",[s._v("m")]),a("mrow",[a("mi",[s._v("v")]),a("mi",[s._v("i")])],1)],1),a("mo",[s._v(")")])],1)],1)],1),a("mo",[s._v("∗")]),a("msubsup",[a("mi",[s._v("m")]),a("mrow",[a("mi",[s._v("u")]),a("mi",[s._v("v")])],1),a("mrow",[a("mo",[s._v("(")]),a("mi",[s._v("l")]),a("mo",[s._v(")")])],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\text{SoftMaxAgg}=\\sum_{u\\in\\mathcal{N}(v)}\\frac{\\exp{(\\beta m_{vu})}}{\\sum_{i\\in\\mathcal{N}(v)}\\exp{(\\beta m_{vi})}}*m_{uv}^{(l)}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"1.427em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"2.9430050000000003em","vertical-align":"-1.516005em"}}),a("span",{staticClass:"base displaystyle textstyle uncramped"},[a("span",{staticClass:"text mord displaystyle textstyle uncramped"},[a("span",{staticClass:"mord mathrm"},[s._v("S")]),a("span",{staticClass:"mord mathrm"},[s._v("o")]),a("span",{staticClass:"mord mathrm",staticStyle:{"margin-right":"0.07778em"}},[s._v("f")]),a("span",{staticClass:"mord mathrm"},[s._v("t")]),a("span",{staticClass:"mord mathrm"},[s._v("M")]),a("span",{staticClass:"mord mathrm"},[s._v("a")]),a("span",{staticClass:"mord mathrm"},[s._v("x")]),a("span",{staticClass:"mord mathrm"},[s._v("A")]),a("span",{staticClass:"mord mathrm",staticStyle:{"margin-right":"0.01389em"}},[s._v("g")]),a("span",{staticClass:"mord mathrm",staticStyle:{"margin-right":"0.01389em"}},[s._v("g")])]),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mop op-limits"},[a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"1.241005em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mrel"},[s._v("∈")]),a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord mathcal",staticStyle:{"margin-right":"0.14736em"}},[s._v("N")])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticStyle:{top:"-0.000005000000000032756em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",[a("span",{staticClass:"op-symbol large-op mop"},[s._v("∑")])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mord reset-textstyle displaystyle textstyle uncramped"},[a("span",{staticClass:"sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.6860000000000002em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle textstyle cramped"},[a("span",{staticClass:"mord textstyle cramped"},[a("span",{staticClass:"mop"},[a("span",{staticClass:"op-symbol small-op mop",staticStyle:{top:"-0.0000050000000000050004em"}},[s._v("∑")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.30001em","margin-right":"0.05em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("i")]),a("span",{staticClass:"mrel"},[s._v("∈")]),a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord mathcal",staticStyle:{"margin-right":"0.14736em"}},[s._v("N")])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mop"},[s._v("exp")]),a("span",{staticClass:"mord textstyle cramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.05278em"}},[s._v("β")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("m")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mord mathit"},[s._v("i")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mclose"},[s._v(")")])])])])]),a("span",{staticStyle:{top:"-0.22999999999999998em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle textstyle uncramped frac-line"})]),a("span",{staticStyle:{top:"-0.677em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle textstyle uncramped"},[a("span",{staticClass:"mord textstyle uncramped"},[a("span",{staticClass:"mop"},[s._v("exp")]),a("span",{staticClass:"mord textstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.05278em"}},[s._v("β")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("m")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mord mathit"},[s._v("u")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"mclose"},[s._v(")")])])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])]),a("span",{staticClass:"sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"})]),a("span",{staticClass:"mbin"},[s._v("∗")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathit"},[s._v("m")]),a("span",{staticClass:"vlist"},[a("span",{staticStyle:{top:"0.247em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle cramped"},[a("span",{staticClass:"mord scriptstyle cramped"},[a("span",{staticClass:"mord mathit"},[s._v("u")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),a("span",{staticStyle:{top:"-0.4129999999999999em","margin-right":"0.05em"}},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),a("span",{staticClass:"reset-textstyle scriptstyle uncramped"},[a("span",{staticClass:"mord scriptstyle uncramped"},[a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"baseline-fix"},[a("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[a("span",{staticStyle:{"font-size":"0em"}},[s._v("​")])]),s._v("​")])])])])])])])]),s._v(" "),a("p",[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mi",[s._v("β")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\beta")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.69444em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"0.8888799999999999em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.05278em"}},[s._v("β")])])])]),s._v("​也是一个参数")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reduce_func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" beta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    norm "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" F"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("softmax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("beta "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mailbox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'m'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dim"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    feat "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" norm "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("  node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mailbox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'m'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    feat "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" torch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("feat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dim"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'h'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("feat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("最后，使用"),a("code",[s._v("partial")]),s._v("绑定参数去使用"),a("code",[s._v("update_all")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用partial绑定好其余参数，update_all会自动传入edge/node参数")]),s._v("\ng"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("update_all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("partial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message_func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" epsilon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("epsilon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" partial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("reduce_func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" beta "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" beta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);t.default=i.exports}}]);